# Preprocessing method configurations

preprocessing_methods:
  # Redundancy and duplicate handling
  redundancy:
    duplicate_removal:
      method: "exact_duplicates"
      parameters:
        keep: "first"  # Keep first occurrence
        
    near_duplicate_removal:
      method: "similarity_based"
      parameters:
        similarity_threshold: 0.95
        embedding_model: "sentence-transformers/all-MiniLM-L6-v2"
        
    data_selection:
      method: "diversity_sampling"
      parameters:
        selection_ratio: 0.8
        diversity_metric: "cosine_distance"

  # Class imbalance handling
  imbalance:
    smote:
      method: "SMOTE"
      parameters:
        sampling_strategy: "auto"
        k_neighbors: 5
        random_state: 42
        
    borderline_smote:
      method: "BorderlineSMOTE"
      parameters:
        sampling_strategy: "auto"
        k_neighbors: 5
        random_state: 42
        
    random_undersampling:
      method: "RandomUnderSampler"
      parameters:
        sampling_strategy: "auto"
        random_state: 42
        
    edited_nearest_neighbors:
      method: "EditedNearestNeighbours"
      parameters:
        n_neighbors: 3
        kind_sel: "all"

  # Noise and overlap handling
  noise:
    confident_learning:
      method: "CleanLab"
      parameters:
        cv_n_folds: 5
        prune_method: "prune_by_noise_rate"
        
    isolation_forest:
      method: "IsolationForest"
      parameters:
        contamination: 0.1
        random_state: 42
        
    local_outlier_factor:
      method: "LocalOutlierFactor"
      parameters:
        n_neighbors: 20
        contamination: 0.1

  # Outlier detection and handling
  outliers:
    statistical_outliers:
      method: "IQR"
      parameters:
        multiplier: 1.5
        features: ["text_length", "word_count"]
        
    embedding_outliers:
      method: "EmbeddingOutliers"
      parameters:
        contamination: 0.05
        embedding_model: "sentence-transformers/all-MiniLM-L6-v2"
        
    robust_scaling:
      method: "RobustScaler"
      parameters:
        quantile_range: [25.0, 75.0]

# Preprocessing pipelines (combinations of methods)
pipelines:
  comprehensive_redundancy:
    steps:
      - type: duplicate
        enabled: true
        params:
          strategy: exact
      - type: duplicate
        enabled: true
        params:
          strategy: approximate
          similarity_threshold: 0.95
      
  comprehensive_imbalance:
    steps:
      - type: imbalance
        enabled: true
        params:
          strategy: smote
          sampling_strategy: auto
          random_state: 42

# New implementation - Preprocessing steps for the pipeline
steps:
  # Outlier Detection
  - type: outlier
    enabled: true
    params:
      strategy: isolation-forest  # Options: z-score, iqr, lof, isolation-forest
      contamination: 0.05         # Proportion of samples to be identified as outliers
      threshold: 3.0              # Threshold for z-score and iqr strategies
      n_neighbors: 20             # Number of neighbors for lof strategy
      random_state: 42

  # Duplicate Removal
  - type: duplicate
    enabled: true
    params:
      strategy: approximate       # Options: exact, approximate
      similarity_threshold: 0.9   # Threshold for approximate similarity (0-1)
      similarity_metric: cosine  # Options: levenshtein, jaccard, cosine, etc.
      cross_label_duplicates: false   # Whether to consider duplicates across different labels
      random_state: 42

  # Imbalance Handling
  - type: imbalance
    enabled: true
    params:
      strategy: random-oversampling  # Options: random-oversampling, smote, adasyn, eda
      sampling_strategy: auto        # Options: auto, minority, not minority, not majority, or float
      random_state: 42
      k_neighbors: 5                 # For SMOTE and ADASYN
      eda_alpha: 0.1                 # For EDA
      eda_num_aug: 4                 # For EDA

# Preprocessing variations for experiments
variations:
  minimal:
    steps:
      - type: duplicate
        enabled: true
        params:
          strategy: exact
  
  medium:
    steps:
      - type: outlier
        enabled: true
        params:
          strategy: z-score
          threshold: 3.0
      - type: duplicate
        enabled: true
        params:
          strategy: exact
  
  full:
    steps:
      - type: outlier
        enabled: true
        params:
          strategy: isolation-forest
          contamination: 0.05
      - type: duplicate
        enabled: true
        params:
          strategy: approximate
          similarity_threshold: 0.9
      - type: imbalance
        enabled: true
        params:
          strategy: smote
          sampling_strategy: auto
      - "edited_nearest_neighbors"
      
  imbalanced_with_duplicates:
    steps:
      - type: duplicate
        enabled: true
        params:
          strategy: approximate
          similarity_threshold: 0.9
          similarity_metric: cosine
          cross_label_duplicates: false
          random_state: 42
      - type: imbalance
        enabled: true
        params:
          strategy: random-oversampling
          sampling_strategy: auto
          random_state: 42
      
  noisy_data:
    steps:
      - type: outlier
        enabled: true
        params:
          strategy: isolation-forest
          contamination: 0.1
          random_state: 42
      - type: duplicate
        enabled: true
        params:
          strategy: exact
          cross_label_duplicates: true
          random_state: 42
      
  comprehensive_noise:
    steps:
      - type: outlier
        enabled: true
        params:
          strategy: isolation-forest
          contamination: 0.1
          random_state: 42
      - type: duplicate
        enabled: true
        params:
          strategy: exact
          cross_label_duplicates: true
      
  comprehensive_outliers:
    steps:
      - type: outlier
        enabled: true
        params:
          strategy: z-score
          threshold: 2.0
      - type: outlier
        enabled: true
        params:
          strategy: isolation-forest
          contamination: 0.05

# Global preprocessing settings
global_settings:
  random_seed: 42
  n_jobs: -1  # Use all available cores
  cache_preprocessed: true
  validation_split: 0.1
  prevent_data_leakage: true  # Ensures preprocessing methods prevent leakage across train/val/test
